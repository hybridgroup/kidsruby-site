webshims.register("form-number-date-api",function(e,t){"use strict";t.addInputType||t.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),t.getStep||(t.getStep=function(t,r){var n=e.attr(t,"step");return"any"===n?n:(r=r||i(t),a[r]&&a[r].step?(n=c.number.asNumber(n),(!isNaN(n)&&n>0?n:a[r].step)*(a[r].stepScaleFactor||1)):n)}),t.addMinMaxNumberToCache||(t.addMinMaxNumberToCache=function(e,t,r){e+"AsNumber"in r||(r[e+"AsNumber"]=a[r.type].asNumber(t.attr(e)),isNaN(r[e+"AsNumber"])&&e+"Default"in a[r.type]&&(r[e+"AsNumber"]=a[r.type][e+"Default"]))});var r=parseInt("NaN",10),a=t.inputTypes,n=function(e){return"number"==typeof e||e&&e==1*e},u=function(t){return e('<input type="'+t+'" />').prop("type")===t},i=function(e){return(e.getAttribute("type")||"").toLowerCase()},s=function(e){return e&&!isNaN(1*e)},o=t.addMinMaxNumberToCache,p=function(e,t){e=""+e,t-=e.length;for(var r=0;t>r;r++)e="0"+e;return e},l=1e-7,m=t.bugs.bustedValidity;t.addValidityRule("stepMismatch",function(e,r,n,u){if(""===r)return!1;if("type"in n||(n.type=i(e[0])),"week"==n.type)return!1;var s,p=(u||{}).stepMismatch||!1;if(a[n.type]&&a[n.type].step){if("step"in n||(n.step=t.getStep(e[0],n.type)),"any"==n.step)return!1;if("valueAsNumber"in n||(n.valueAsNumber=a[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;o("min",e,n),s=n.minAsNumber,isNaN(s)&&(s=a[n.type].stepBase||0),p=Math.abs((n.valueAsNumber-s)%n.step),p=!(l>=p||l>=Math.abs(p-n.step))}return p}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(e){t.addValidityRule(e.name,function(t,r,n,u){var s=(u||{})[e.name]||!1;if(""===r)return s;if("type"in n||(n.type=i(t[0])),a[n.type]&&a[n.type].asNumber){if("valueAsNumber"in n||(n.valueAsNumber=a[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;if(o(e.attr,t,n),isNaN(n[e.attr+"AsNumber"]))return s;s=n[e.attr+"AsNumber"]*e.factor<n.valueAsNumber*e.factor-l}return s})}),t.reflectProperties(["input"],["max","min","step"]);var f=t.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var t=this,n=i(t),u=a[n]&&a[n].asNumber?a[n].asNumber(e.prop(t,"value")):f.prop._supget&&f.prop._supget.apply(t,arguments);return null==u&&(u=r),u},set:function(r){var n=this,u=i(n);if(a[u]&&a[u].numberToString){if(isNaN(r))return e.prop(n,"value",""),void 0;var s=a[u].numberToString(r);s!==!1?e.prop(n,"value",s):t.error("INVALID_STATE_ERR: DOM Exception 11")}else f.prop._supset&&f.prop._supset.apply(n,arguments)}}}),d=t.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var t=this,r=i(t);return a[r]&&a[r].asDate&&!a[r].noAsDate?a[r].asDate(e.prop(t,"value")):d.prop._supget&&d.prop._supget.call(t)||null},set:function(r){var n=this,u=i(n);if(!a[u]||!a[u].dateToString||a[u].noAsDate)return d.prop._supset&&d.prop._supset.apply(n,arguments)||null;if(null===r)return e.prop(n,"value",""),"";var s=a[u].dateToString(r);return s!==!1?(e.prop(n,"value",s),s):(t.error("INVALID_STATE_ERR: DOM Exception 11"),void 0)}}});e.each({stepUp:1,stepDown:-1},function(r,n){var u=t.defineNodeNameProperty("input",r,{prop:{value:function(r){var s,o,p,m,f,d=i(this);if(!a[d]||!a[d].asNumber){if(u.prop&&u.prop._supvalue)return u.prop._supvalue.apply(this,arguments);throw t.info("no step method for type: "+d),"invalid state error"}if(f={type:d},r||(r=1,t.warn("you should always use a factor for stepUp/stepDown")),r*=n,o=e.prop(this,"valueAsNumber"),isNaN(o))throw t.info("valueAsNumber is NaN can't apply stepUp/stepDown "),"invalid state error";if(s=t.getStep(this,d),"any"==s)throw t.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";if(t.addMinMaxNumberToCache("min",e(this),f),t.addMinMaxNumberToCache("max",e(this),f),s*=r,o=1*(o+s).toFixed(5),p=(o-(f.minAsNumber||0))%s,p&&Math.abs(p)>l&&(m=o-p,m+=p>0?s:-s,o=1*m.toFixed(5)),!isNaN(f.maxAsNumber)&&o>f.maxAsNumber||!isNaN(f.minAsNumber)&&f.minAsNumber>o)throw t.info("max/min overflow can't apply stepUp/stepDown"),"invalid state error";e.prop(this,"valueAsNumber",o)}}})});var c={number:{bad:function(e){return!n(e)},step:1,stepScaleFactor:1,asNumber:function(e){return n(e)?1*e:r},numberToString:function(e){return n(e)?e:!1}},range:{minDefault:0,maxDefault:100},color:{bad:function(){var e=/^\u0023[a-f0-9]{6}$/;return function(t){return!t||7!=t.length||!e.test(t)}}()},date:{bad:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var t,r=e.split(/\u002D/);if(3!==r.length)return!0;var a=!1;if(4>r[0].length||2!=r[1].length||r[1]>12||2!=r[2].length||r[2]>33)a=!0;else for(t=0;3>t;t++)if(!s(r[t])){a=!0;break}return a||e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864e5,asDate:function(e,t){return!t&&this.bad(e)?null:new Date(this.asNumber(e,!0))},asNumber:function(e,t){var a=r;return(t||!this.bad(e))&&(e=e.split(/\u002D/),a=Date.UTC(e[0],e[1]-1,e[2])),a},numberToString:function(e){return n(e)?this.dateToString(new Date(1*e)):!1},dateToString:function(e){return e&&e.getFullYear?p(e.getUTCFullYear(),4)+"-"+p(e.getUTCMonth()+1,2)+"-"+p(e.getUTCDate(),2):!1}},time:{bad:function(t,r){if(!t||!t.split||!/\d$/.test(t))return!0;if(t=t.split(/\u003A/),2>t.length||t.length>3)return!0;var a,n=!1;return t[2]&&(t[2]=t[2].split(/\u002E/),a=parseInt(t[2][1],10),t[2]=t[2][0]),e.each(t,function(e,t){return s(t)&&2===t.length?void 0:(n=!0,!1)}),n?!0:t[0]>23||0>t[0]||t[1]>59||0>t[1]?!0:t[2]&&(t[2]>59||0>t[2])?!0:a&&isNaN(a)?!0:(a&&(100>a?a*=100:10>a&&(a*=10)),r===!0?[t,a]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=r;return e=this.bad(e,!0),e!==!0&&(t=Date.UTC("1970",0,1,e[0][0],e[0][1],e[0][2]||0),e[1]&&(t+=e[1])),t},dateToString:function(e){if(e&&e.getUTCHours){var t=p(e.getUTCHours(),2)+":"+p(e.getUTCMinutes(),2),r=e.getSeconds();return"0"!=r&&(t+=":"+p(r,2)),r=e.getUTCMilliseconds(),"0"!=r&&(t+="."+p(r,3)),t}return!1}},month:{bad:function(e){return c.date.bad(e+"-01")},step:1,stepScaleFactor:!1,asDate:function(e){return new Date(c.date.asNumber(e+"-01"))},asNumber:function(e){var t=r;return e&&!this.bad(e)&&(e=e.split(/\u002D/),e[0]=1*e[0]-1970,e[1]=1*e[1]-1,t=12*e[0]+e[1]),t},numberToString:function(e){var t,r=!1;return n(e)&&(t=e%12,e=(e-t)/12+1970,t+=1,1>t&&(e-=1,t+=12),r=p(e,4)+"-"+p(t,2)),r},dateToString:function(e){if(e&&e.getUTCHours){var t=c.date.dateToString(e);return t.split&&(t=t.split(/\u002D/))?t[0]+"-"+t[1]:!1}return!1}},"datetime-local":{bad:function(e,t){return e&&e.split&&2===(e+"special").split(/\u0054/).length?(e=e.split(/\u0054/),c.date.bad(e[0])||c.time.bad(e[1],t)):!0},noAsDate:!0,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=r,a=this.bad(e,!0);return a!==!0&&(e=e.split(/\u0054/)[0].split(/\u002D/),t=Date.UTC(e[0],e[1]-1,e[2],a[0][0],a[0][1],a[0][2]||0),a[1]&&(t+=a[1])),t},dateToString:function(e,t){return c.date.dateToString(e)+"T"+c.time.dateToString(e,t)}}};!m&&u("range")&&u("time")&&u("month")&&u("datetime-local")||(c.range=e.extend({},c.number,c.range),c.time=e.extend({},c.date,c.time),c.month=e.extend({},c.date,c.month),c["datetime-local"]=e.extend({},c.date,c.time,c["datetime-local"])),["number","month","range","date","time","color","datetime-local"].forEach(function(e){(m||!u(e))&&t.addInputType(e,c[e])}),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,r=e(this).closest("label").filter(function(){var e=this.attributes["for"]||{};return!e.specified||e.value==t});return t&&(r=r.add('label[for="'+t+'"]')),r.get()},writeable:!1}})});